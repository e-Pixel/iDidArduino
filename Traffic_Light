/*
  Traffic Light (Still in Progress)
*/

const int ultrasonic_sensor = 5;

const int led_red = 1;
const int led_amarillo = 2;
const int led_verde = 3;
const int trigPin = 9;

long duration;
int distance;

int welc = 0; // para el void loop()
int x = 1; // para el void welcome()

void setup(){
  Serial.begin(9600);
  pinMode(led_red, OUTPUT);
  pinMode(led_verde, OUTPUT);
  pinMode(led_amarillo, OUTPUT);
  pinMode(ultrasonic_sensor, INPUT);
  pinMode(trigPin, OUTPUT);
}

void welcome(){
  digitalWrite(x, HIGH);
  delay(1000);
  digitalWrite(x, LOW);
  delay(1000);
  x = x + 1;
  if (x >= 2){
    x = x + 0;
    digitalWrite(x, LOW);
  }
  else{}
}

void w_test(){ // just a test, not to be taken seriously (and definitely not to be used!)
  digitalWrite(led_red, HIGH);
  delay(1000);
  digitalWrite(led_red, LOW);
  delay(1000);
  digitalWrite(led_amarillo, HIGH);
  delay(1000);
  digitalWrite(led_amarillo, LOW);
  delay(1000);
  digitalWrite(led_verde, HIGH);
  delay(1000);
  digitalWrite(led_verde, LOW);
  delay(1000);
}

void loop(){
// fill
  welc = welc + 1;
  while (welc <= 3){
    welcome();
  }
  digitalWrite(trigPin, LOW);
  delayMicroseconds(2);
  // Sets the trigPin on HIGH state for 10 micro seconds
  digitalWrite(trigPin, HIGH);
  delayMicroseconds(10);
  digitalWrite(trigPin, LOW);
  // Reads the echoPin, returns the sound wave travel time in microseconds
  duration = pulseIn(ultrasonic_sensor, HIGH);
  // Calculating the distance
  distance= duration*0.034/2;
  Serial.print(distance);
}
